openapi: 3.0.0
info:
  description: Spending Limit Control Service API
  version: 1.0.1
  title: Nchf_SpendingLimitControl
externalDocs:
  description: 3GPP TS 29.594 V15.3.0; 5G System; Spending Limit Control Service.
  url: 'http://www.3gpp.org/ftp/Specs/archive/29_series/29.594/'
servers:
  - url: '{apiRoot}/nchf-spendinglimitcontrol/v1'
    variables:
      apiRoot:
        default: 'https://example.com'
        description: apiRoot as defined in subclause subclause 4.4 of 3GPP TS 29.501
security:
  - {}
  - oAuth2ClientCredentials:
      - nchf-spendinglimitcontrol
paths:
  /subscriptions:
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                supi:
                  type: string
                  pattern: '^(imsi-[0-9]{5,15}|nai-.+|.+)$'
                gpsi:
                  type: string
                  pattern: '^(msisdn-[0-9]{5,15}|extid-[^@]+@[^@]+|.+)$'
                policyCounterIds:
                  type: array
                  items:
                    type: string
                    description: Identifies a policy counter.
                  minItems: 1
                  description: >-
                    This is a list of policy counter identifier(s), which
                    identifies policy counters maintained per subscriber within
                    the CHF.
                notifUri:
                  type: string
                supportedFeatures:
                  type: string
                  pattern: '^[A-Fa-f0-9]*$'
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  supi:
                    type: string
                    pattern: '^(imsi-[0-9]{5,15}|nai-.+|.+)$'
                  statusInfos:
                    type: object
                    additionalProperties:
                      type: object
                      properties:
                        policyCounterId:
                          type: string
                          description: Identifies a policy counter.
                        currentStatus:
                          type: string
                          description: >-
                            Identifies the policy counter status applicable for
                            a specific policy counter identified by the
                            policyCounterId. The values (e.g. valid, invalid or
                            any other status) are not specified. The
                            interpretation and actions related to the defined
                            values are out of scope of 3GPP.
                        penPolCounterStatuses:
                          type: array
                          items:
                            type: object
                            properties:
                              policyCounterStatus:
                                type: string
                                description: >-
                                  Identifies the policy counter status
                                  applicable for a specific policy counter
                                  identified by the policyCounterId. The values
                                  (e.g. valid, invalid or any other status) are
                                  not specified. The interpretation and actions
                                  related to the defined values are out of scope
                                  of 3GPP.
                              activationTime:
                                format: date-time
                                type: string
                            required:
                              - policyCounterStatus
                              - activationTime
                          minItems: 1
                          description: Provides the pending policy counter status.
                      required:
                        - policyCounterId
                        - currentStatus
                    minProperties: 1
                    description: >-
                      Status of the requested policy counters. The key of the
                      map is the attribute "policyCounterId".
                  supportedFeatures:
                    type: string
                    pattern: '^[A-Fa-f0-9]*$'
                required:
                  - statusInfos
          headers:
            Location:
              description: >-
                Contains the URI of the created individual spending limit
                resource, according to the structure:
                {apiRoot}/nchf-spendinglimitcontrol/v1/subscriptions/{subscriptionId}
              required: true
              schema:
                type: string
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '401':
          description: Unauthorized
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '411':
          description: Length Required
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '413':
          description: Payload Too Large
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '415':
          description: Unsupported Media Type
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '429':
          description: Too Many Requests
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '503':
          description: Service Unavailable
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        default:
          description: Generic Error
      callbacks:
        statusNotification:
          '{$request.body#/notifUri}/notify':
            post:
              requestBody:
                required: true
                content:
                  application/json:
                    schema:
                      type: object
                      properties:
                        supi:
                          type: string
                          pattern: '^(imsi-[0-9]{5,15}|nai-.+|.+)$'
                        statusInfos:
                          type: object
                          additionalProperties:
                            type: object
                            properties:
                              policyCounterId:
                                type: string
                                description: Identifies a policy counter.
                              currentStatus:
                                type: string
                                description: >-
                                  Identifies the policy counter status
                                  applicable for a specific policy counter
                                  identified by the policyCounterId. The values
                                  (e.g. valid, invalid or any other status) are
                                  not specified. The interpretation and actions
                                  related to the defined values are out of scope
                                  of 3GPP.
                              penPolCounterStatuses:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    policyCounterStatus:
                                      type: string
                                      description: >-
                                        Identifies the policy counter status
                                        applicable for a specific policy counter
                                        identified by the policyCounterId. The
                                        values (e.g. valid, invalid or any other
                                        status) are not specified. The
                                        interpretation and actions related to
                                        the defined values are out of scope of
                                        3GPP.
                                    activationTime:
                                      format: date-time
                                      type: string
                                  required:
                                    - policyCounterStatus
                                    - activationTime
                                minItems: 1
                                description: Provides the pending policy counter status.
                            required:
                              - policyCounterId
                              - currentStatus
                          minProperties: 1
                          description: >-
                            Status of the requested policy counters. The key of
                            the map is the attribute "policyCounterId".
                        supportedFeatures:
                          type: string
                          pattern: '^[A-Fa-f0-9]*$'
                      required:
                        - statusInfos
              responses:
                '204':
                  description: 'No Content, Notification was succesfull'
                '400':
                  description: Bad request
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '401':
                  description: Unauthorized
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '403':
                  description: Forbidden
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '404':
                  description: Not Found
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '411':
                  description: Length Required
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '413':
                  description: Payload Too Large
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '415':
                  description: Unsupported Media Type
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '429':
                  description: Too Many Requests
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '500':
                  description: Internal Server Error
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '503':
                  description: Service Unavailable
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                default:
                  description: Generic Error
        subscriptionTermination:
          '{$request.body#/notifUri}/terminate':
            post:
              requestBody:
                required: true
                content:
                  application/json:
                    schema:
                      type: object
                      properties:
                        supi:
                          type: string
                          pattern: '^(imsi-[0-9]{5,15}|nai-.+|.+)$'
                        termCause:
                          anyOf:
                            - type: string
                              enum:
                                - REMOVED_SUBSCRIBER
                            - type: string
                      required:
                        - supi
              responses:
                '204':
                  description: 'No Content, Notification was succesfull'
                '400':
                  description: Bad request
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '401':
                  description: Unauthorized
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '403':
                  description: Forbidden
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '404':
                  description: Not Found
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '411':
                  description: Length Required
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '413':
                  description: Payload Too Large
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '415':
                  description: Unsupported Media Type
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '429':
                  description: Too Many Requests
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '500':
                  description: Internal Server Error
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                '503':
                  description: Service Unavailable
                  content:
                    application/problem+json:
                      schema:
                        type: object
                        properties:
                          type:
                            type: string
                          title:
                            type: string
                          status:
                            type: integer
                          detail:
                            type: string
                          instance:
                            type: string
                          cause:
                            type: string
                          invalidParams:
                            type: array
                            items:
                              type: object
                              properties:
                                param:
                                  type: string
                                reason:
                                  type: string
                              required:
                                - param
                            minItems: 1
                default:
                  description: Generic Error
  '/subscriptions/{subscriptionId}':
    parameters:
      - in: path
        name: subscriptionId
        description: Identifies an individual spending limit retrieval subscription.
        required: true
        schema:
          type: string
    put:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                supi:
                  type: string
                  pattern: '^(imsi-[0-9]{5,15}|nai-.+|.+)$'
                gpsi:
                  type: string
                  pattern: '^(msisdn-[0-9]{5,15}|extid-[^@]+@[^@]+|.+)$'
                policyCounterIds:
                  type: array
                  items:
                    type: string
                    description: Identifies a policy counter.
                  minItems: 1
                  description: >-
                    This is a list of policy counter identifier(s), which
                    identifies policy counters maintained per subscriber within
                    the CHF.
                notifUri:
                  type: string
                supportedFeatures:
                  type: string
                  pattern: '^[A-Fa-f0-9]*$'
      responses:
        '200':
          description: OK. Resource was succesfully modified and representation is returned
          content:
            application/json:
              schema:
                type: object
                properties:
                  supi:
                    type: string
                    pattern: '^(imsi-[0-9]{5,15}|nai-.+|.+)$'
                  statusInfos:
                    type: object
                    additionalProperties:
                      type: object
                      properties:
                        policyCounterId:
                          type: string
                          description: Identifies a policy counter.
                        currentStatus:
                          type: string
                          description: >-
                            Identifies the policy counter status applicable for
                            a specific policy counter identified by the
                            policyCounterId. The values (e.g. valid, invalid or
                            any other status) are not specified. The
                            interpretation and actions related to the defined
                            values are out of scope of 3GPP.
                        penPolCounterStatuses:
                          type: array
                          items:
                            type: object
                            properties:
                              policyCounterStatus:
                                type: string
                                description: >-
                                  Identifies the policy counter status
                                  applicable for a specific policy counter
                                  identified by the policyCounterId. The values
                                  (e.g. valid, invalid or any other status) are
                                  not specified. The interpretation and actions
                                  related to the defined values are out of scope
                                  of 3GPP.
                              activationTime:
                                format: date-time
                                type: string
                            required:
                              - policyCounterStatus
                              - activationTime
                          minItems: 1
                          description: Provides the pending policy counter status.
                      required:
                        - policyCounterId
                        - currentStatus
                    minProperties: 1
                    description: >-
                      Status of the requested policy counters. The key of the
                      map is the attribute "policyCounterId".
                  supportedFeatures:
                    type: string
                    pattern: '^[A-Fa-f0-9]*$'
                required:
                  - statusInfos
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '401':
          description: Unauthorized
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '411':
          description: Length Required
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '413':
          description: Payload Too Large
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '415':
          description: Unsupported Media Type
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '429':
          description: Too Many Requests
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '503':
          description: Service Unavailable
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        default:
          description: Generic Error
    delete:
      responses:
        '204':
          description: No Content. Resource was succesfully deleted
        '400':
          description: Bad request
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '401':
          description: Unauthorized
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '429':
          description: Too Many Requests
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        '503':
          description: Service Unavailable
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                  title:
                    type: string
                  status:
                    type: integer
                  detail:
                    type: string
                  instance:
                    type: string
                  cause:
                    type: string
                  invalidParams:
                    type: array
                    items:
                      type: object
                      properties:
                        param:
                          type: string
                        reason:
                          type: string
                      required:
                        - param
                    minItems: 1
        default:
          description: Generic Error
components:
  securitySchemes:
    oAuth2ClientCredentials:
      type: oauth2
      flows:
        clientCredentials:
          tokenUrl: '{nrfApiRoot}/oauth2/token'
          scopes:
            nchf-spendinglimitcontrol: Access to the Nchf_SpendingLimitControl API
  schemas:
    SpendingLimitContext:
      type: object
      properties:
        supi:
          type: string
          pattern: '^(imsi-[0-9]{5,15}|nai-.+|.+)$'
        gpsi:
          type: string
          pattern: '^(msisdn-[0-9]{5,15}|extid-[^@]+@[^@]+|.+)$'
        policyCounterIds:
          type: array
          items:
            type: string
            description: Identifies a policy counter.
          minItems: 1
          description: >-
            This is a list of policy counter identifier(s), which identifies
            policy counters maintained per subscriber within the CHF.
        notifUri:
          type: string
        supportedFeatures:
          type: string
          pattern: '^[A-Fa-f0-9]*$'
    SpendingLimitStatus:
      type: object
      properties:
        supi:
          type: string
          pattern: '^(imsi-[0-9]{5,15}|nai-.+|.+)$'
        statusInfos:
          type: object
          additionalProperties:
            type: object
            properties:
              policyCounterId:
                type: string
                description: Identifies a policy counter.
              currentStatus:
                type: string
                description: >-
                  Identifies the policy counter status applicable for a specific
                  policy counter identified by the policyCounterId. The values
                  (e.g. valid, invalid or any other status) are not specified.
                  The interpretation and actions related to the defined values
                  are out of scope of 3GPP.
              penPolCounterStatuses:
                type: array
                items:
                  type: object
                  properties:
                    policyCounterStatus:
                      type: string
                      description: >-
                        Identifies the policy counter status applicable for a
                        specific policy counter identified by the
                        policyCounterId. The values (e.g. valid, invalid or any
                        other status) are not specified. The interpretation and
                        actions related to the defined values are out of scope
                        of 3GPP.
                    activationTime:
                      format: date-time
                      type: string
                  required:
                    - policyCounterStatus
                    - activationTime
                minItems: 1
                description: Provides the pending policy counter status.
            required:
              - policyCounterId
              - currentStatus
          minProperties: 1
          description: >-
            Status of the requested policy counters. The key of the map is the
            attribute "policyCounterId".
        supportedFeatures:
          type: string
          pattern: '^[A-Fa-f0-9]*$'
      required:
        - statusInfos
    PolicyCounterInfo:
      type: object
      properties:
        policyCounterId:
          type: string
          description: Identifies a policy counter.
        currentStatus:
          type: string
          description: >-
            Identifies the policy counter status applicable for a specific
            policy counter identified by the policyCounterId. The values (e.g.
            valid, invalid or any other status) are not specified. The
            interpretation and actions related to the defined values are out of
            scope of 3GPP.
        penPolCounterStatuses:
          type: array
          items:
            type: object
            properties:
              policyCounterStatus:
                type: string
                description: >-
                  Identifies the policy counter status applicable for a specific
                  policy counter identified by the policyCounterId. The values
                  (e.g. valid, invalid or any other status) are not specified.
                  The interpretation and actions related to the defined values
                  are out of scope of 3GPP.
              activationTime:
                format: date-time
                type: string
            required:
              - policyCounterStatus
              - activationTime
          minItems: 1
          description: Provides the pending policy counter status.
      required:
        - policyCounterId
        - currentStatus
    PendingPolicyCounterStatus:
      type: object
      properties:
        policyCounterStatus:
          type: string
          description: >-
            Identifies the policy counter status applicable for a specific
            policy counter identified by the policyCounterId. The values (e.g.
            valid, invalid or any other status) are not specified. The
            interpretation and actions related to the defined values are out of
            scope of 3GPP.
        activationTime:
          format: date-time
          type: string
      required:
        - policyCounterStatus
        - activationTime
    PolicyCounterId:
      type: string
      description: Identifies a policy counter.
    SubscriptionTerminationInfo:
      type: object
      properties:
        supi:
          type: string
          pattern: '^(imsi-[0-9]{5,15}|nai-.+|.+)$'
        termCause:
          anyOf:
            - type: string
              enum:
                - REMOVED_SUBSCRIBER
            - type: string
      required:
        - supi
    TerminationCause:
      anyOf:
        - type: string
          enum:
            - REMOVED_SUBSCRIBER
        - type: string
